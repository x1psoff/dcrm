# Быстрый старт
# 1) Скопируйте файл:
#    cp env.example .env
# 2) Отредактируйте минимум:
#    - SECRET_KEY (обязательно для продакшена)
#    - (опционально) TELEGRAM_BOT_TOKEN если хотите включить tg-бота
#    - (опционально) RESTIC_PASSWORD если хотите включить бэкапы (ВАЖНО: пароль должен быть постоянным)
# 3) Запуск:
#    docker compose up -d --build
#
# Важно: реальный `.env` в git не коммитим.

# Django
DEBUG=true
ALLOWED_HOSTS=*
# Use a strong value in production (do not reuse the dev key).
SECRET_KEY=change-me
TZ=UTC
DJANGO_PORT=8000
# Optional
# DJANGO_COLLECTSTATIC=1

# Paths (optional)
# For Docker Compose in this repo we mount host paths into the container as /data/*
# - host: /data/apps/dcrm/db.sqlite3  -> container: /data/db.sqlite3
# - host: /data/apps/dcrm/media       -> container: /data/media
DB_PATH=/data/db.sqlite3
MEDIA_ROOT=/data/media

# Reverse proxy (Traefik)
PROXY_HTTP_PUBLISH=8088
PROXY_HTTPS_PUBLISH=443
RATE_LIMIT_AVG=20
RATE_LIMIT_BURST=40

# CSRF / proxy (если логин/POST падают за HTTPS/прокси)
# Укажи URL(ы), по которым ты реально открываешь сайт (scheme обязателен!):
# пример:
# CSRF_TRUSTED_ORIGINS=http://<server-ip>:8088,https://DomachniyOchag.<tailnet>.ts.net
CSRF_TRUSTED_ORIGINS=
# Если TLS завершается на Traefik (а до Django идёт HTTP), включи:
SECURE_PROXY_SSL_HEADER=0
USE_X_FORWARDED_HOST=0
CSRF_COOKIE_SECURE=0
SESSION_COOKIE_SECURE=0
# Если видишь ошибку "Origin checking failed - null" (встроенный браузер/вебвью):
# ВНИМАНИЕ: это ослабляет CSRF защиту, включай только если нужно.
CSRF_STRIP_NULL_ORIGIN=0

# Telegram bot
# Чтобы включить бота: docker compose --profile bot up -d --build
TELEGRAM_BOT_TOKEN=

# Backups (restic)
# Чтобы включить бэкапы: docker compose --profile backup up -d
# Бэкапы пишутся в ./backups (на диске: /data/apps/dcrm/backups), внутри repo: ./backups/dcrm
# IMPORTANT: keep this password safe. If you change it, existing backups become unreadable.
RESTIC_PASSWORD=change-me
# Optional override (inside backup container):
# RESTIC_REPOSITORY=/restic/dcrm


